<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Pipeline: spring-boot deploy with Gitlab CI - DevOps with Dimas Maryanto</title>
<meta name="description" content="Hai semuanya, di materi study kasus kali ini kita akan membahas Gitlab CI untuk spring-boot berdasarkan source-code berikut. Jadi karena pembahasan lumayan panjang kita akan bagi menjadi beberapa bagian yaitu     Create unit/integration testing run locally   Run unit/integration test using Gitlab CI   Build jar archived to gitlab   Build &amp; push docker image using archived artifact   Ok langsung bahas yang pertama yaitu">


  <meta name="author" content="Dimas Maryanto">
  
  <meta property="article:author" content="Dimas Maryanto">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="DevOps with Dimas Maryanto">
<meta property="og:title" content="Pipeline: spring-boot deploy with Gitlab CI">
<meta property="og:url" content="/posts/devops/docker/ci/study-cases/gitlab-ci/12e-pipeline-spring-boot-gitlab-ci">


  <meta property="og:description" content="Hai semuanya, di materi study kasus kali ini kita akan membahas Gitlab CI untuk spring-boot berdasarkan source-code berikut. Jadi karena pembahasan lumayan panjang kita akan bagi menjadi beberapa bagian yaitu     Create unit/integration testing run locally   Run unit/integration test using Gitlab CI   Build jar archived to gitlab   Build &amp; push docker image using archived artifact   Ok langsung bahas yang pertama yaitu">







  <meta property="article:published_time" content="2021-12-04T10:34:46+07:00">





  

  


<link rel="canonical" href="/posts/devops/docker/ci/study-cases/gitlab-ci/12e-pipeline-spring-boot-gitlab-ci">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Dimas maryanto",
      "url": "/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="DevOps with Dimas Maryanto Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



<script src="/assets/js/jquery/jquery-3.6.4.min.js"></script>
    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt="DevOps with Dimas Maryanto"></a>
        
        <a class="site-title" href="/">
          DevOps with Dimas Maryanto
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/pages/recent-posts/">Archives</a>
            </li><li class="masthead__menu-item">
              <a href="/pages/cources/">Cources</a>
            </li><li class="masthead__menu-item">
              <a href="/pages/roadmaps/">Roadmaps</a>
            </li><li class="masthead__menu-item">
              <a href="/pages/private-class/">Private class</a>
            </li><li class="masthead__menu-item">
              <a href="/pages/discount/">Promo</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <img src="/assets/images/profile.jpeg" alt="Dimas Maryanto" itemprop="image" class="u-photo">
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      Dimas Maryanto
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>I am an <strong>Instructure</strong> at Udemy and 
<strong>Chief Technology Officer</strong> at PT. Tabeldata Informatika</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  <hr>
  

  

  

  
    
    
  
  
  
  <nav class="toc">
    <header>
      <h4 class="nav__title">
        <i class="fas fa-file-alt"></i> 
        On this page
      </h4>
    </header>
    <ul class="toc__menu"><li><a href="#create-unitintegration-testing-and-run-locally">Create unit/integration testing and run locally</a></li><li><a href="#run-unitintegration-test-using-gitlab-ci">Run unit/integration test using Gitlab CI</a></li><li><a href="#build-jar-and-archived-to-gitlab">Build jar and archived to gitlab</a></li><li><a href="#build-docker-image-using-dependencies">Build docker image using dependencies</a></li></ul>

  </nav>
  
  </div>




  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Pipeline: spring-boot deploy with Gitlab CI">
    <meta itemprop="description" content="Hai semuanya, di materi study kasus kali ini kita akan membahas Gitlab CI untuk spring-boot berdasarkan source-code berikut. Jadi karena pembahasan lumayan panjang kita akan bagi menjadi beberapa bagian yaitu  Create unit/integration testing run locally  Run unit/integration test using Gitlab CI  Build jar archived to gitlab  Build &amp; push docker image using archived artifactOk langsung bahas yang pertama yaitu">
    <meta itemprop="datePublished" content="2021-12-04T10:34:46+07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12e-pipeline-spring-boot-gitlab-ci" class="u-url" itemprop="url">Pipeline: spring-boot deploy with Gitlab CI
</a>
          </h1>
          
<p class="page__meta">

  
  
    <a href="/pages/cources/docker" target="_blank" rel="noopener noreferrer">
      <i class="fas fa-link"></i>
      Docker for DevOps engineer
    </a>
    <span class="page__meta-sep"></span>
  



  
    
    <span class="page__meta-date">
      <i class="far fa-calendar-alt" aria-hidden="true"></i>
      
      <time datetime="2021-12-04T10:34:46+07:00">December 4, 2021</time>
    </span>
  

  <span class="page__meta-sep"></span>

  
    
    

    <span class="page__meta-readtime">
      <i class="far fa-clock" aria-hidden="true"></i>
      
        7 minute read
      
    </span>
  
    

</p>

        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <div class="text-right">
          <label class="switch">
            <input name="cource-content" onchange="showCourceContent(this.checked)" type="checkbox">
            <span class="slider"></span>
          </label>
        </div>        
        <aside id="cource_contents" style="display: none;" class="sidebar__right">
          
            
            
            
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Pengenalan Docker">
        <label class="acordion-item-label" for="content-Pengenalan Docker">
            Pengenalan Docker
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/basic/01-silabus">
                        
                        Silabus: Basic Docker
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/01a-container-overview">
                        
                        Container overview
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/01b-docker-overview">
                        
                        Docker overview
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/02-system-requirement">
                        
                        What to know before you ins...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/02a-install-on-windows10-wls">
                        
                        How to install Docker on Wi...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/02b-install-on-linux-centos">
                        
                        How to install Docker on Li...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/02c-install-on-mac">
                        
                        How to install Docker on Ma...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/basic/03-getting-started">
                        
                        Getting Started with Docker
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Registry">
        <label class="acordion-item-label" for="content-Docker Registry">
            Docker Registry
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/registry/03a-docker-registry">
                        
                        Docker Registry (Docker HUB)
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/registry/03b-insecure-registry">
                        
                        Insecure Registry
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/registry/03c-using-nexus-oss">
                        
                        Using Nexus OSS as insecure...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Container CLI">
        <label class="acordion-item-label" for="content-Docker Container CLI">
            Docker Container CLI
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/container/04-docker-cli">
                        
                        Docker CLI (Command Line In...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04a-docker-container-command">
                        
                        Management Docker Container
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04b-docker-image-command">
                        
                        Management Docker Images
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04c-docker-exec-command">
                        
                        Run a command in a running ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04d-expose-service-outside">
                        
                        Expose services to outside ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04e-docker-copy">
                        
                        Copying files/content betwe...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04f-logging-inspect-stats-container">
                        
                        Logging, Inspect, & Resourc...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/container/04g-docker-run-env-file">
                        
                        Run a Container using Envir...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Networks">
        <label class="acordion-item-label" for="content-Docker Networks">
            Docker Networks
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/network/05-docker-network">
                        
                        Networking overview
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05a-connect-to-other-container-use-link">
                        
                        Legacy feature of Docker Ne...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05b-docker-bridge-network">
                        
                        Use default bridge networks
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05c-docker-user-defined-briged-network">
                        
                        Use user-defined bridge net...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05d-docker-advance-user-defined-bridge-network">
                        
                        Advanced user-defined bridg...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05e-docker-host-network">
                        
                        Use host networking
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/network/05g-docker-none-network">
                        
                        Disable networking for a co...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Volumes">
        <label class="acordion-item-label" for="content-Docker Volumes">
            Docker Volumes
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/volume/06-docker-volume">
                        
                        Docker Volume Overview
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/volume/06a-management-volume">
                        
                        Management Volume
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/volume/06b-use-binding-volume-flag">
                        
                        Use Bind Mounts
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/volume/06c-share-data-among-containers">
                        
                        Share data among containers
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/volume/06e-share-data-among-machines">
                        
                        Share data among machines
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Dockerfile">
        <label class="acordion-item-label" for="content-Dockerfile">
            Dockerfile
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07-dockerfile">
                        
                        Build Docker Image Overview
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07a-usage-docker-build">
                        
                        Usage docker build
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07b-dockerfile-from-instruction">
                        
                        FROM Instruction
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07c-dockerfile-env">
                        
                        Environtment Replacement
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07d-dockerfile-copy">
                        
                        Copying Resources
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07e-dockerfile-ignore">
                        
                        Excluding files/directories
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07f-dockerfile-label">
                        
                        Label Instruction
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07g-dockerfile-exec">
                        
                        Execution Instruction
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07h-dockerfile-cmd-vs-entrypoint">
                        
                        CMD vs ENTRYPOINT?
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07i-dockerfile-expose">
                        
                        Exposing Ports
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07j-dockerfile-user-workdir">
                        
                        User, Volumes and Working D...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07k-dockerfile-healthcheck">
                        
                        Health Check Instruction
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07l-dockerfile-multi-stages">
                        
                        Multiple Stage Builds
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07m-best-practice-dockerfile">
                        
                        Best practices for writing ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/07n-docker-image-scan">
                        
                        Best practices for scanning...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Study Kasus: Build docker image">
        <label class="acordion-item-label" for="content-Study Kasus: Build docker image">
            Study Kasus: Build docker image
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08-build-specific-programming-lanaguage">
                        
                        Build specific docker image...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08a-build-java-web-tomcat">
                        
                        Build Docker Image for Java...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08b-using-maven-docker-plugin">
                        
                        Build Java Web using maven-...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08c-build-springboot">
                        
                        Build docker image for spri...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08d-build-springboot-using-env">
                        
                        Springboot - using Environt...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08e-build-springboot-upload-file">
                        
                        Springboot - where data suc...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08f-build-springboot-using-db">
                        
                        Springboot - Using Database
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08g-build-angular-project">
                        
                        Build docker image for Angu...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08h-build-angular-rest-api">
                        
                        Angular - Access Rest API
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08i-build-angular-proxy-to-backend">
                        
                        Angular - Proxy to backend
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08j-build-php">
                        
                        Build docker image for PHP
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08k-build-laravel-apps">
                        
                        Build Docker image for Lara...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08l-build-laravel-webapp-and-restapi">
                        
                        Laravel - Using Frontend & ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/dockerfile/study-cases/08m-build-laravel-using-db">
                        
                        Laravel - Using Database
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Compose">
        <label class="acordion-item-label" for="content-Docker Compose">
            Docker Compose
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/compose/09-docker-compose-overview">
                        
                        Overview of Docker Compose
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/09a-compose-getting-started">
                        
                        Get started with Docker Com...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/09b-compose-cli">
                        
                        Overview of docker-compose CLI
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/09c-syntax-compose-file">
                        
                        Compose file specification ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/environtment/09d-compose-using-env-variables">
                        
                        Environment variables in Co...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/volume/09e-compose-volume">
                        
                        Volume in Compose
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/volume/09f-compose-share-data-between-containers">
                        
                        Share data between Containe...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/volume/09g-share-data-using-sshfs-in-compose">
                        
                        Using sshfs for share data ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/volume/09h-share-data-using-nfs-in-compose">
                        
                        Using NFS for share data in...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/network/09i-compose-network-overview">
                        
                        Networking Overview in Comp...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/network/09j-compose-network-link">
                        
                        Network links in Compose file
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/network/09k-compose-network-specify-custom">
                        
                        Specify custom networks in ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/dependency/09l-compose-depend-on">
                        
                        Dependency between services...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/build/09m-compose-build-image">
                        
                        Build docker image using Co...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/workflows/09n-compose-using-profile">
                        
                        Using profiles with Compose...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/workflows/09o-multiple-compose-add-override-attr">
                        
                        Multiple Compose files to A...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/workflows/09p-multi-compose-use-cases">
                        
                        Example use case of multipl...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/scale/09q-compose-scale-services">
                        
                        Scale services using compos...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/workflow/09r-compose-in-production">
                        
                        Use Compose in production
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Study Kasus: Docker Compose">
        <label class="acordion-item-label" for="content-Study Kasus: Docker Compose">
            Study Kasus: Docker Compose
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10-overview-compose-study-case">
                        
                        Overview of Study Cases usi...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10a-compose-php-study-case">
                        
                        PHP deployment using compos...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10b-compose-laravel-study-case">
                        
                        Laravel deployment using co...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10c-compose-springboot-study-case">
                        
                        Springboot deployment using...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10d-compose-angular-study-case">
                        
                        Angular deployment using co...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/10e-httpd-ssl-docker">
                        
                        Deploy httpd with ssl/https...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/compose/study-cases/git/10f-compose-using-multiple-git-projects">
                        
                        Compose file for multiple g...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Context">
        <label class="acordion-item-label" for="content-Docker Context">
            Docker Context
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/context/11-overview-docker-engine">
                        
                        Overview of Docker Context
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/11a-docker-context">
                        
                        Usage & Managing Docker Con...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/11b-docker-compose-remote-access">
                        
                        Remote deployment using doc...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/11c-dind">
                        
                        Docker Inside Docker (DinD)
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/dashboard/11d-docker-desktop">
                        
                        Dashboard using Docker Desktop
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/dashboard/11e-docker-jetbraint">
                        
                        Using Docker on Jetbraint IDE
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/dashboard/11f-docker-portainer">
                        
                        Using docker on portainer.io
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/context/11g-deprecated-features">
                        
                        Deprecated Engine Features
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Study Kasus: Docker for CI">
        <label class="acordion-item-label" for="content-Study Kasus: Docker for CI">
            Study Kasus: Docker for CI
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12-overview-docker-for-ci">
                        
                        Overview of Study Cases usi...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12a-setup-gitlab-ci">
                        
                        Setup environment for CI us...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12b-syntax-gitlab-ci-yml">
                        
                        The `.gitlab-ci.yml` file
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12c-pipeline-php-gitlab-ci">
                        
                        Pipeline: PHP deployment us...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12d-pipeline-javaweb-gitlab-ci">
                        
                        Pipeline: Java Web deployme...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12e-pipeline-spring-boot-gitlab-ci">
                        
                        <i class="fas fa-bookmark"></i>
                        
                        Pipeline: spring-boot deplo...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12f-pipeline-angular-gitlab-ci">
                        
                        Pipeline: Angular deploy wi...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12g-pipeline-laravel-gitlab-ci">
                        
                        Pipeline: Laravel deploy wi...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Machine">
        <label class="acordion-item-label" for="content-Docker Machine">
            Docker Machine
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/machine/13-docker-machine-overview">
                        
                        Overview of Docker machines
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13a-install-docker-machine-for-windows">
                        
                        Install docker-machine on W...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13a-install-docker-machine-for-linux">
                        
                        Install docker-machine on L...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13a-install-docker-machine-for-mac">
                        
                        Install docker-machine on M...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13b-getting-started">
                        
                        Getting started with docker...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13c-managed-machines">
                        
                        Managing a machines in dock...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/machine/13d-usecases-docker-machine">
                        
                        Example Use Cases of docker...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Study Kasus: Ansible for Docker">
        <label class="acordion-item-label" for="content-Study Kasus: Ansible for Docker">
            Study Kasus: Ansible for Docker
        </label>
        <div class="acordion-item-content">
            <ul>
            
                
                <li>
                    <a href="/posts/devops/docker/ansible/study-cases/14-overview-ansible-for-docker">
                        
                        Overview Study cases: IT Au...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/14a-it-automation-platform">
                        
                        IT Automation Platform for ...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/ansible/study-cases/14b-setup-ansible-environment">
                        
                        Setup Ansible Control and M...
                    </a>
                </li>
                
                <li>
                    <a href="/posts/devops/docker/14c-ansible-for-docker-operations">
                        
                        Getting started with Ansibl...
                    </a>
                </li>
                
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Docker Swarm">
        <label class="acordion-item-label" for="content-Docker Swarm">
            Docker Swarm
        </label>
        <div class="acordion-item-content">
            <ul>
            
            <li>
                <a href="#!">Materi belum tersedia</a>
            </li>
            
            </ul>
        </div>
    </div>
</nav>
              
                
                
                



<div class="accordion-container">
    <div class="acordion-item">
        <input type="checkbox" id="content-Study Kasus: Docker Swarm">
        <label class="acordion-item-label" for="content-Study Kasus: Docker Swarm">
            Study Kasus: Docker Swarm
        </label>
        <div class="acordion-item-content">
            <ul>
            
            <li>
                <a href="#!">Materi belum tersedia</a>
            </li>
            
            </ul>
        </div>
    </div>
</nav>
                
                      
          
        </aside>
        
        <p>Hai semuanya, di materi study kasus kali ini kita akan membahas Gitlab CI untuk spring-boot berdasarkan source-code <a href="/posts/devops/docker/compose/study-cases/10c-compose-springboot-study-case">berikut</a>. Jadi karena pembahasan lumayan panjang kita akan bagi menjadi beberapa bagian yaitu</p>

<ol>
  <li>Create unit/integration testing run locally</li>
  <li>Run unit/integration test using Gitlab CI</li>
  <li>Build jar archived to gitlab</li>
  <li>Build &amp; push docker image using archived artifact</li>
</ol>

<p>Ok langsung bahas yang pertama yaitu</p>

<!--more-->

<h2 id="create-unitintegration-testing-and-run-locally">Create unit/integration testing and run locally</h2>

<p>Testing is an integral part of enterprise software development. The benefits of the Spring Framework’s support for <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#integration-testing">integration testing</a>.</p>

<p>Ada banyak hal sebetulnya yang kita bisa bahas disini tetapi, untuk sekarang kita bahas yang paling penting dulu ya yaitu Run Unit Testing menggunakan pipeline Gitlab CI. Tapi sebelum itu kita akan buat dulu simple Integration Testing untuk melakukan check data yang dikembalikan Rest API seperti berikut:</p>

<ol>
  <li>
    <p>Buat file <code class="language-plaintext highlighter-rouge">MahasiswaControllerRestTest</code> dalam folder <code class="language-plaintext highlighter-rouge">src/test/java</code> menggunakan package <code class="language-plaintext highlighter-rouge">com.maryanto.dimas.udemy.controller</code> seperti berikut:</p>

    <script src="https://gist.github.com/dimMaryanto93/ff00f4fbaf9d03de33b9a9a1bd159f6a.js?file=12e-MahasiswaControllerRestTest.java"> </script>
  </li>
  <li>
    <p>Selanjutnya, karena unit/integration testing tersebut membutuhkan Database PostgreSQL, sekarang kita jalankan postgresql servicenya menggunakan docker-compose seperti berikut</p>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">    docker-compose up <span class="nt">-d</span> postgres
    </code></pre></figure>

<ol>
  <li>Setelah database postgresql running, kita bisa coba jalankan unit/integration test dengan peritah <code class="language-plaintext highlighter-rouge">mvn</code> seperti berikut:</li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mvn clean <span class="nb">test</span></code></pre></figure>

<p>Jika dijalankan maka hasilnya seperti berikut:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  docker git:<span class="o">(</span>ci/spring-boot<span class="o">)</span> mvn clean <span class="nb">test</span>
<span class="o">[</span>WARNING]
<span class="o">[</span>INFO] Scanning <span class="k">for </span>projects...
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">-------------</span>&lt; com.maryanto.dimas.udemy:docker-springboot <span class="o">&gt;</span><span class="nt">-------------</span>
<span class="o">[</span>INFO] Building Dockerize Springboot Apps 2021.07.05.00.18-release
<span class="o">[</span>INFO] <span class="nt">--------------------------------</span><span class="o">[</span> jar <span class="o">]</span><span class="nt">---------------------------------</span>
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-clean-plugin:3.1.0:clean <span class="o">(</span>default-clean<span class="o">)</span> @ docker-springboot <span class="nt">---</span>
<span class="o">[</span>INFO] Deleting /mnt/c/Users/dimasm93/Workspaces/udemy/docker/target
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">---</span> maven-resources-plugin:3.2.0:resources <span class="o">(</span>default-resources<span class="o">)</span> @ docker-springboot <span class="nt">---</span>
<span class="o">[</span>INFO] <span class="nt">-------------------------------------------------------</span>
<span class="o">[</span>INFO]  T E S T S
<span class="o">[</span>INFO] <span class="nt">-------------------------------------------------------</span>
<span class="o">[</span>INFO] Running com.maryanto.dimas.udemy.controller.MahasisaControllerRestTest
04:59:59.606 <span class="o">[</span>main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating CacheAwareContextLoaderDelegate from class <span class="o">[</span>org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate]
04:59:59.637 <span class="o">[</span>main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating BootstrapContext using constructor <span class="o">[</span>public org.springframework.test.context.support.DefaultBootstrapContext<span class="o">(</span>java.lang.Class,org.springframework.test.context.CacheAwareContextLoaderDelegate<span class="o">)]</span>
04:59:59.705 <span class="o">[</span>main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper <span class="k">for </span><span class="nb">test </span>class <span class="o">[</span>com.maryanto.dimas.udemy.controller.MahasisaControllerRestTest] from class <span class="o">[</span>org.springframework.boot.test.context.SpringBootTestContextBootstrapper]
04:59:59.735 <span class="o">[</span>main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found <span class="k">for </span><span class="nb">test </span>class <span class="o">[</span>com.maryanto.dimas.udemy.controller.MahasisaControllerRestTest], using SpringBootContextLoader

2021-12-04 05:00:01.154  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] c.m.d.u.c.MahasisaControllerRestTest     : Starting MahasisaControllerRestTest using Java 11.0.11 on MSI-Z390 with PID 254 <span class="o">(</span>started by dimasm93 <span class="k">in</span> /mnt/c/Users/dimasm93/Workspaces/udemy/docker<span class="o">)</span>
2021-12-04 05:00:03.492  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning <span class="k">in </span>234 ms. Found 1 JPA repository interfaces.
2021-12-04 05:00:04.528  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 7.7.3 by Redgate
2021-12-04 05:00:04.557  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2021-12-04 05:00:04.790  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2021-12-04 05:00:04.885  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.f.c.i.database.base.DatabaseType       : Database: jdbc:postgresql://localhost:5432/udemy_docker <span class="o">(</span>PostgreSQL 12.6<span class="o">)</span>
2021-12-04 05:00:05.026  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.f.core.internal.command.DbValidate     : Successfully validated 1 migration <span class="o">(</span>execution <span class="nb">time </span>00:00.078s<span class="o">)</span>
2021-12-04 05:00:05.039  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.f.core.internal.command.DbMigrate      : Current version of schema <span class="s2">"public"</span>: 1
2021-12-04 05:00:05.040  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.f.core.internal.command.DbMigrate      : Schema <span class="s2">"public"</span> is up to date. No migration necessary.
2021-12-04 05:00:05.368  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: 
2021-12-04 05:00:11.572  INFO 254 <span class="nt">---</span> <span class="o">[</span>           main] c.m.d.u.c.MahasisaControllerRestTest     : Started MahasisaControllerRestTest <span class="k">in </span>11.052 seconds <span class="o">(</span>JVM running <span class="k">for </span>12.787<span class="o">)</span>
Hibernate:
    <span class="k">select
        </span>mahasiswa0_.id as id1_0_0_,
        mahasiswa0_.nama as nama2_0_0_,
        mahasiswa0_.nim as nim3_0_0_,
        mahasiswa0_.smt as smt4_0_0_
    from
        mahasiswa mahasiswa0_
    where
        mahasiswa0_.id<span class="o">=</span>?
<span class="o">[</span>INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.838 s - <span class="k">in </span>com.maryanto.dimas.udemy.controller.MahasisaControllerRestTest
DockerizeSpringbootAppsApplicationTests <span class="k">in </span>3.511 seconds <span class="o">(</span>JVM running <span class="k">for </span>17.122<span class="o">)</span>
<span class="o">[</span>INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 3.566 s - <span class="k">in </span>com.maryanto.dimas.udemy.DockerizeSpringbootAppsApplicationTests
2021-12-04 05:00:15.945  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory <span class="k">for </span>persistence unit <span class="s1">'default'</span>
2021-12-04 05:00:15.949  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2021-12-04 05:00:15.957  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2021-12-04 05:00:15.962  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory <span class="k">for </span>persistence unit <span class="s1">'default'</span>
2021-12-04 05:00:15.963  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2021-12-04 05:00:15.975  INFO 254 <span class="nt">---</span> <span class="o">[</span>ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] Results:
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
<span class="o">[</span>INFO]
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] BUILD SUCCESS
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
<span class="o">[</span>INFO] Total <span class="nb">time</span>:  22.789 s
<span class="o">[</span>INFO] Finished at: 2021-12-04T05:00:16+07:00
<span class="o">[</span>INFO] <span class="nt">------------------------------------------------------------------------</span>
</code></pre></div></div>

<p>Jika outputnya seperti di atas, artinya kita sudah bisa terkoneksi ke database dengan cara memanggil service MahasiswaController melalui RestAPI dengan endpoint <code class="language-plaintext highlighter-rouge">/api/mahasiswa/{id}</code> pada method GET.</p>

<h2 id="run-unitintegration-test-using-gitlab-ci">Run unit/integration test using Gitlab CI</h2>

<p>Ok setelah kita coba di local, sekarang kita akan buat automation menggunakan Pipeline di gitlab-ci. Kenapa kita buat automationnya?</p>

<p>Jadi unit/integration testing ini berguna jika programer males jalanin testnya jadi kita bisa make sure source-code yang kita buat jauh dari bugs atau klo misalnya ada penambahan feature tidak ngenggol feature yang existing. Ok langsung ja kita buat pipelinenya untuk menjalankan unit/integration testing</p>

<ol>
  <li>
    <p>Pertama kita buat file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> seperti berikut:</p>

    <script src="https://gist.github.com/dimMaryanto93/ff00f4fbaf9d03de33b9a9a1bd159f6a.js?file=12e-gitlab-ci.test.yml"> </script>
  </li>
  <li>Setelah itu, kita coba commit menggunakan perintah <code class="language-plaintext highlighter-rouge">git commit -m 'init project'</code></li>
  <li>Dan kemudian coba buat repository baru, misalnya buat dengan nama <code class="language-plaintext highlighter-rouge">udemy-springboot</code></li>
  <li>Dan yang terakhir coba buat tags dan push sourcenya. kemudian coba check status pipelinenya seperti berikut:</li>
</ol>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/01-pipeline-job-detail.png" alt="pipeline-status" /></p>

<p>Jika kita mau lihat junit report dari gitlab, kita bisa check yang unit test mana saja yang succussed dan failed seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/02-pipeline-job-report.png" alt="pipeline-report-status" /></p>

<p>kita juga bisa lihat detail dari reportnya seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/03-pipeline-job-report-detail.png" alt="pipeline-report-detail-status" /></p>

<h2 id="build-jar-and-archived-to-gitlab">Build jar and archived to gitlab</h2>

<p>Next step adalah kita akan membuild jar file menggunakan Pipeline Gitlab CI, Java web dengan Springboot framework jaman sekarang di deploy menggunakan format <code class="language-plaintext highlighter-rouge">jar</code> yang di running sebagai service. Dengan kita membuat pipeline build jar ini akan sangat berguna untuk tahap selanjutnya jika kita mau menggunakan Continues Delivery ataupun deploy secara manual. Ok lansung aja kita buat pipelinenya</p>

<ol>
  <li>
    <p>update file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> menjadi seperti berikut:</p>

    <script src="https://gist.github.com/dimMaryanto93/ff00f4fbaf9d03de33b9a9a1bd159f6a.js?file=12e-gitlab-ci.build-jar.yml"> </script>
  </li>
  <li>
    <p>Selanjutnya, kita buat tags dan push source-codenya. Kita coba check pipelinenuya seperti berikut:</p>
  </li>
</ol>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/04-pipeline-status.png" alt="pipeline-build-status" /></p>

<p>Jadi di pipeline tersebut, akan menjalankan <code class="language-plaintext highlighter-rouge">test:unit</code> jika sudah success maka jalankan job <code class="language-plaintext highlighter-rouge">build:jar</code>, sekarang kita coba check detail job untuk <code class="language-plaintext highlighter-rouge">build:jar</code> seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/05-pipeline-build-job-detail-status.png" alt="pipeline-build-jar-job-detail-status" /></p>

<p>Jika sudah success, maka kita bisa download artifact nya yang kita build tadi. atau kita bisa juga browse filenya seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/06-job-artifact-downloads.png" alt="pipeline-artifact-download" /></p>

<h2 id="build-docker-image-using-dependencies">Build docker image using dependencies</h2>

<p>Ok selanjutnya dan terkahir, kita akan build docker image menggunakan Pipeline Gitlab CI. Untuk build docker image kali ini berbeda dengan yang sebelumnya yaitu menggunaman <code class="language-plaintext highlighter-rouge">maven-dockerfile-plugin</code> sekarang kita akan membuat dengan docker client sebagai executor-nya. Ok langsung ja berikut pipelinenya</p>

<ol>
  <li>
    <p>Kita edit file <code class="language-plaintext highlighter-rouge">.gitlab-ci.yml</code> untuk job <code class="language-plaintext highlighter-rouge">build:jar</code> dan buat job baru dengan nama <code class="language-plaintext highlighter-rouge">build:docker</code> dalam stage <code class="language-plaintext highlighter-rouge">build</code> seperti berikut:</p>

    <script src="https://gist.github.com/dimMaryanto93/ff00f4fbaf9d03de33b9a9a1bd159f6a.js?file=12e-gitlab-ci.build-docker.yml"> </script>
  </li>
  <li>
    <p>Selanjutnya, kita buat tags dan push source-codenya. Kita coba check pipelinenuya seperti berikut:</p>
  </li>
</ol>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/07-pipeline-docker-status.png" alt="pipeline-build-status" /></p>

<p>Jadi dengan script pipeline tersebut, workflownya <code class="language-plaintext highlighter-rouge">test</code> -&gt; <code class="language-plaintext highlighter-rouge">build:jar</code> -&gt; <code class="language-plaintext highlighter-rouge">build:docker</code> jika kita lihat dari sisi dependencies seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/08-pipeline-docker-job-depends-status.png" alt="pipeline-depends" /></p>

<p>Sekarang kita coba check job detailnya untuk <code class="language-plaintext highlighter-rouge">build:docker</code> seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/09-pipeline-docker-job-detail-status.png" alt="pipeline-depends" /></p>

<p>Jika kita perhatikan di job detail tersebut, disitu mendownload dari artifact dari <code class="language-plaintext highlighter-rouge">build:jar</code> sebelumnya dan push docker image ke insecure registry seperti berikut:</p>

<p><img src="/resources/posts/docker/12e-pipeline-springboot/10-docker-image-pushed.png" alt="pipeline-docker-image-push" /></p>

        
        <div class="text-right">
          <!--  -->












<nav>
  <ul class="pagination text-right">
    <!-- goto first page -->
    <li id="first_post" class="page-item">
      
      <a href="/posts/devops/docker/basic/01-silabus"  class="" title="Silabus: Basic Docker">
        First page
      </a>
      
    </li>
    <li id="previous_page" class="page-item">
      
      <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12d-pipeline-javaweb-gitlab-ci" class="" 
        title="Pipeline: Java Web deployment using Gitlab CI
">
        <i class="fas fa-chevron-left"></i>
      </a>
       
    </li>
    <li class="page-item">
      <a href="#" class=" disabled">
        Page 100 to 113
      </a>
    </li>
    <li id="next_page" class="page-item">
      
      <a href="/posts/devops/docker/ci/study-cases/gitlab-ci/12f-pipeline-angular-gitlab-ci" class="" 
        title="Pipeline: Angular deploy with Gitlab CI
">
        <i class="fas fa-chevron-right"></i>
      </a>
      
    </li>
    <li id="last_post" class="page-item">
      
      <a href="/posts/devops/docker/14c-ansible-for-docker-operations"  class="" title="Getting started with Ansible role, tasks for docker">
        Last page
      </a>
      
    </li>
  </ul>
</nav>

<a href="#page-title" class="back-to-top">Back to top &uarr;</a>
        </div>
      </section>

      <footer class="page__meta">
        
        


  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#ci" class="page__taxonomy-item p-category" rel="tag">ci</a><span class="sep">, </span>
    
      <a href="/categories/#devops" class="page__taxonomy-item p-category" rel="tag">DevOps</a><span class="sep">, </span>
    
      <a href="/categories/#docker" class="page__taxonomy-item p-category" rel="tag">Docker</a><span class="sep">, </span>
    
      <a href="/categories/#gitlab-ci" class="page__taxonomy-item p-category" rel="tag">Gitlab-CI</a><span class="sep">, </span>
    
      <a href="/categories/#study-cases" class="page__taxonomy-item p-category" rel="tag">Study-Cases</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-12-04T10:34:46+07:00">December 4, 2021</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Pipeline%3A+spring-boot+deploy+with+Gitlab+CI%20%2Fposts%2Fdevops%2Fdocker%2Fci%2Fstudy-cases%2Fgitlab-ci%2F12e-pipeline-spring-boot-gitlab-ci" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=%2Fposts%2Fdevops%2Fdocker%2Fci%2Fstudy-cases%2Fgitlab-ci%2F12e-pipeline-spring-boot-gitlab-ci" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=%2Fposts%2Fdevops%2Fdocker%2Fci%2Fstudy-cases%2Fgitlab-ci%2F12e-pipeline-spring-boot-gitlab-ci" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You may also enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/500x300.png" alt="">
      </div>
    
    <h3 class="archive__item-title no_toc" itemprop="headline">
      
        <a class="btn btn-sm btn-light text-nowrap" href="/posts/devops/automation/ansible/basic/00-silabus-ansible" rel="permalink">Silabus Ansible: Pemula sampai Mahir
</a>
      
    </h3>
    
<p class="page__meta">

  
  
    <a href="/pages/cources/ansible" target="_blank" rel="noopener noreferrer">
      <i class="fas fa-link"></i>
      Ansible Automation Platform
    </a>
    <span class="page__meta-sep"></span>
  



  
    
    <span class="page__meta-date">
      <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
      
      <time datetime="2023-07-02T07:26:30+07:00">July 2, 2023</time>
    </span>
  

  <span class="page__meta-sep"></span>

  
    
    

    <span class="page__meta-readtime">
      <i class="far fa-fw fa-clock" aria-hidden="true"></i>
      
        less than 1 minute read
      
    </span>
  
    

</p>

        
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/500x300.png" alt="">
      </div>
    
    <h3 class="archive__item-title no_toc" itemprop="headline">
      
        <a class="btn btn-sm btn-light text-nowrap" href="/posts/git/gitlab/gitlab-ci/03d-getting-started" rel="permalink">Getting started: Create and run your first Gitlab CI/CD pipeline
</a>
      
    </h3>
    
<p class="page__meta">

  
  
    <a href="/pages/cources/gitlab" target="_blank" rel="noopener noreferrer">
      <i class="fas fa-link"></i>
      GitOps with Gitlab
    </a>
    <span class="page__meta-sep"></span>
  



  
    
    <span class="page__meta-date">
      <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
      
      <time datetime="2023-06-18T15:30:55+07:00">June 18, 2023</time>
    </span>
  

  <span class="page__meta-sep"></span>

  
    
    

    <span class="page__meta-readtime">
      <i class="far fa-fw fa-clock" aria-hidden="true"></i>
      
        8 minute read
      
    </span>
  
    

</p>

        
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/500x300.png" alt="">
      </div>
    
    <h3 class="archive__item-title no_toc" itemprop="headline">
      
        <a class="btn btn-sm btn-light text-nowrap" href="/posts/git/gitlab/gitlab-ci/03c-setup-gitlab-ci" rel="permalink">Settings up Gitlab CI (on-premise)
</a>
      
    </h3>
    
<p class="page__meta">

  
  
    <a href="/pages/cources/gitlab" target="_blank" rel="noopener noreferrer">
      <i class="fas fa-link"></i>
      GitOps with Gitlab
    </a>
    <span class="page__meta-sep"></span>
  



  
    
    <span class="page__meta-date">
      <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
      
      <time datetime="2023-06-17T21:12:16+07:00">June 17, 2023</time>
    </span>
  

  <span class="page__meta-sep"></span>

  
    
    

    <span class="page__meta-readtime">
      <i class="far fa-fw fa-clock" aria-hidden="true"></i>
      
        8 minute read
      
    </span>
  
    

</p>

        
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/500x300.png" alt="">
      </div>
    
    <h3 class="archive__item-title no_toc" itemprop="headline">
      
        <a class="btn btn-sm btn-light text-nowrap" href="/posts/git/gitlab/gitlab-ci/03b-introduction-gitlab-ci" rel="permalink">Introduction of Gitlab DevSecOps Platform
</a>
      
    </h3>
    
<p class="page__meta">

  
  
    <a href="/pages/cources/gitlab" target="_blank" rel="noopener noreferrer">
      <i class="fas fa-link"></i>
      GitOps with Gitlab
    </a>
    <span class="page__meta-sep"></span>
  



  
    
    <span class="page__meta-date">
      <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
      
      <time datetime="2023-06-17T20:36:43+07:00">June 17, 2023</time>
    </span>
  

  <span class="page__meta-sep"></span>

  
    
    

    <span class="page__meta-readtime">
      <i class="far fa-fw fa-clock" aria-hidden="true"></i>
      
        2 minute read
      
    </span>
  
    

</p>

        
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

<script>
function showCourceContent(data){
  if(data) {
    $('body').removeClass('wide');
    $('#cource_contents').show();
  } else {
    $('body').addClass('wide');
    $('#cource_contents').hide();
  }
}

</script>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://facebook.com/dimmaryanto93/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i> Facebook</a></li>
        
      
        
          <li><a href="https://github.com/dimmaryanto93" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
          <li><a href="https://instagram.com/dimmaryanto93" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
        
          <li><a href="https://www.youtube.com/@DimasMaryanto" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-youtube" aria-hidden="true"></i> Youtube</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Dimas maryanto. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
